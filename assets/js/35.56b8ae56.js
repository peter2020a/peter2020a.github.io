(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{307:function(a,s,t){"use strict";t.r(s);var e=t(13),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"centos7部署fastdfs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos7部署fastdfs"}},[a._v("#")]),a._v(" centos7部署FastDFS")]),a._v(" "),s("h2",{attrs:{id:"fastdfs角色简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fastdfs角色简介"}},[a._v("#")]),a._v(" FastDFS角色简介")]),a._v(" "),s("p",[a._v("tracker:跟踪者，负责调度存储服务。\nstorage:用于文件存储。\nclient:调用tracker")]),a._v(" "),s("h2",{attrs:{id:"fastdfs单节点安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fastdfs单节点安装"}},[a._v("#")]),a._v(" FastDFS单节点安装")]),a._v(" "),s("h3",{attrs:{id:"第一步-安装相关工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-安装相关工具"}},[a._v("#")]),a._v(" 第一步 安装相关工具")]),a._v(" "),s("p",[a._v("如果已经安装vim与wget可以跳过这一步")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum -y install  vim wget unzip\n")])])]),s("p",[a._v("-y ：不经过询问直接同意所有操作")]),a._v(" "),s("p",[a._v("vim ： linux上面一个好的文本编辑软件")]),a._v(" "),s("p",[a._v("wget ： linux上传一个文件下载工具")]),a._v(" "),s("h3",{attrs:{id:"第二步-安装相关依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-安装相关依赖"}},[a._v("#")]),a._v(" 第二步 安装相关依赖")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y gcc-c++ perl\n")])])]),s("h3",{attrs:{id:"第三步-安装libfastcommon"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-安装libfastcommon"}},[a._v("#")]),a._v(" 第三步 安装libfastcommon")]),a._v(" "),s("p",[a._v("大家可以直接到github上面找的到ibfastcommon。这里为了大家方便查找。我已经把把链接给大家整理好了。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("https://github.com/happyfish100/libfastcommon\n")])])]),s("p",[a._v("这里大家可以先下载到本地，然后再传至服务器上面。这里我使用的是xftp。具体操不在这里就不相信说了。\n下载下来的是zip格式压缩包，然后，我们解压zip")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("unzip libfastcommon-master.zip\n")])])]),s("p",[a._v("进入到刚刚解压的文件里面")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd libfastcommon-master/\n")])])]),s("p",[a._v("进行编译安装")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./make.sh && ./make.sh install\n")])])]),s("h3",{attrs:{id:"第四步-安装fastdfs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-安装fastdfs"}},[a._v("#")]),a._v(" 第四步 安装FastDFS")]),a._v(" "),s("p",[a._v("同样这里我用的也是github上面的FastDFS。为此，我已经帮大家把相关的链接整理到下方了")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("https://github.com/happyfish100/fastdfs\n")])])]),s("p",[a._v("这里可以使用像上面ibfastcommon一样的方式，先下载到自己的电脑上面，再上传至服务器。\n下面我们先进行解压")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("unzip fastdfs-master.zip\n")])])]),s("p",[a._v("编译安装")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./make.sh && ./make.sh install\n")])])]),s("h3",{attrs:{id:"第五步-修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五步-修改配置文件"}},[a._v("#")]),a._v(" 第五步 修改配置文件")]),a._v(" "),s("p",[a._v("切换到配置文件目录下")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /etc/fdfs/\n")])])]),s("p",[a._v("查看所有配置文件")]),a._v(" "),s("p",[a._v("使用ls命令就行了")]),a._v(" "),s("p",[a._v("去除所有的.sample后缀")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mv client.conf.sample client.conf\nmv storage.conf.sample storage.conf\nmv storage_ids.conf.sample storage_ids.conf\nmv tracker.conf.sample tracker.conf\n")])])]),s("p",[a._v("我们再次使用ls命令查看")]),a._v(" "),s("p",[a._v("可以看到我们已经去除了所有的.sample后缀")]),a._v(" "),s("p",[a._v("下一步，创建文件夹，分别创建client，storage，tracker文件夹")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir -p /home/software/fastfdfs/fdfa/client\nmkdir -p /home/software/fastfdfs/fdfa/storage\nmkdir -p /home/software/fastfdfs/fdfa/tracker\n")])])]),s("h4",{attrs:{id:"下面我们开始配置文件修改-首先修改的是clietn-conf-使用vim编辑器进行文件的编辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下面我们开始配置文件修改-首先修改的是clietn-conf-使用vim编辑器进行文件的编辑"}},[a._v("#")]),a._v(" 下面我们开始配置文件修改，首先修改的是clietn.conf,使用vim编辑器进行文件的编辑")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vim client.conf\n")])])]),s("p",[a._v("使用 "),s("code",[a._v(":set number")]),a._v(" 显示行数")]),a._v(" "),s("p",[a._v("修改第十行，确定日志文件文件日志，这里用我们刚刚创建client文件夹路径")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("base_path=/home/software/fastfdfs/fdfa/client\n")])])]),s("p",[a._v("修改第14 行，tracker的地址与端口，这里我使用的是虚拟机，而且我的tracker等会和我的storage在同一台服务器启动，我的是192.168.223.19。大家这里根据实际情况修改")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.19:22122\n")])])]),s("p",[a._v("这里大家大家记得保存修改")]),a._v(" "),s("h4",{attrs:{id:"下面我们修改storage-conf。同上是用vim进行修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下面我们修改storage-conf。同上是用vim进行修改"}},[a._v("#")]),a._v(" 下面我们修改storage.conf。同上是用vim进行修改")]),a._v(" "),s("p",[a._v("修改第41行 storage基础路径，上面我们已经创建了这个目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("base_path=/home/software/fastfdfs/fdfa/storage\n")])])]),s("p",[a._v("修改第110行，storage路径。storage.conf已经说了如果这个路径不存在，会依照base_path.为了不出意外，我们配置一下这个路径")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(" store_path0=/home/software/fastfdfs/fdfa/storage\n")])])]),s("p",[a._v("修改第119行 ，配置tracker的IP地址与端口。至于如何填写这个地址，上面配置client.conf的时候，我们就已经说过了。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.19:22122\n")])])]),s("h4",{attrs:{id:"现在修改tracker-conf文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#现在修改tracker-conf文件"}},[a._v("#")]),a._v(" 现在修改tracker.conf文件")]),a._v(" "),s("p",[a._v("修改第22行，修改tracker的基础路径。这个路径的文件夹我们刚刚在上面已经创建过了")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("base_path=/home/software/fastfdfs/fdfa/tracker\n")])])]),s("p",[a._v("修改第54行 归属组设置")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("store_group=group1\n")])])]),s("h3",{attrs:{id:"第六步-启动tracker与storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第六步-启动tracker与storage"}},[a._v("#")]),a._v(" 第六步 启动tracker与storage")]),a._v(" "),s("p",[a._v("启动tracker")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("fdfs_trackerd /etc/fdfs/tracker.conf start\n")])])]),s("p",[a._v("启动storage")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("fdfs_storaged /etc/fdfs/storage.conf start\n")])])]),s("p",[a._v("测试是否启动成功，我们尝试上传文件。我的root文件夹下有一张图片")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("fdfs_test /etc/fdfs/client.conf upload  /root/fastdfs/Screenshot_1.png\n")])])]),s("h3",{attrs:{id:"第七步-安装nginx访问图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第七步-安装nginx访问图片"}},[a._v("#")]),a._v(" 第七步 安装nginx访问图片")]),a._v(" "),s("p",[a._v("我这里单独再说一下nginx的安装。")]),a._v(" "),s("p",[a._v("首先安装依赖")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum -y install gcc-c++ zlib-devel pcre-devel\n")])])]),s("p",[a._v("下载nginx安装包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("wget http://nginx.org/download/nginx-1.14.0.tar.gz\n")])])]),s("p",[a._v("解压安装包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tar zxvf nginx-1.14.0.tar.gz\n")])])]),s("p",[a._v("下载nginx的fastdfs模块，这里我已经帮大家把这个项目github地址整理好了。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("https://github.com/happyfish100/fastdfs-nginx-module\n")])])]),s("p",[a._v("这里我们可以先下载到自己电脑上，再上传服务器。")]),a._v(" "),s("p",[a._v("进行解压")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("unzip fastdfs-nginx-module-master.zip\n")])])]),s("p",[a._v("创建nginx安装目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir -p /home/software/nginx\n")])])]),s("p",[a._v("切换到nginx压缩包的解压目录里面去")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd nginx-1.14.0\n")])])]),s("p",[a._v("进行配置检测并且添加模块")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./configure --prefix=/home/software/nginx --add-module=/home/software/fastdfs-nginx-module-master/src\n--prefix : 我们刚刚创建的nginx的安装目录\n--add-module：解压后模块所在目录，记得要加上src\n")])])]),s("p",[a._v("成功")]),a._v(" "),s("p",[a._v("编译并安装")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("make && make install\n")])])]),s("p",[a._v("复制配置文件至"),s("code",[a._v("/etc/fdfs")]),a._v("里面去")]),a._v(" "),s("p",[a._v("切换至fastdfs的解压包里面去")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/software/fastfdfs/fastdfs-master\n")])])]),s("p",[a._v("进行文件的复制")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cp conf/http.conf /etc/fdfs/\ncp conf/mime.types /etc/fdfs/\n")])])]),s("p",[a._v("切换至fastdfs-nginx-module的解压目录下面")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/software/fastdfs-nginx-module-master\n")])])]),s("p",[a._v("进行配置文件的复制")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cp src/mod_fastdfs.conf /etc/fdfs/\n")])])]),s("p",[a._v("修改"),s("code",[a._v("/etc/fdfs")]),a._v("下面的"),s("code",[a._v("mod_fastdfs.conf")]),a._v("配置文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vim /etc/fdfs/mod_fastdfs.conf\n")])])]),s("p",[a._v("修改 40行，更改tracker的ip地址与端口")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.19:22122\n")])])]),s("p",[a._v("修改53行 url地址中是否包含组名")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("url_have_group_name = true\n")])])]),s("p",[a._v("修改62行 storage所在目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("store_path0=/home/software/fastfdfs/fdfa/storage\n")])])]),s("p",[a._v("保存修改")]),a._v(" "),s("p",[a._v("进行nginx配置文件的修改，首先切换到nginx的安装目录下面")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/software/nginx\n")])])]),s("p",[a._v("进行nginx.conf的修改，找到44行，注释掉44 45行，下面添加一行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ngx_fastdfs_module;\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("location / {\n     #root html;\n     #index index.html index.htm;\n     ngx_fastdfs_module;\n}\n")])])]),s("p",[a._v("启动nginx，切换到nginx安装目录下的sbin目录下面去，先进行配置文件的检验。如果配置检验没问题。再启动nginx")]),a._v(" "),s("p",[a._v("切换到sbin目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/software/nginx/sbin/\n")])])]),s("p",[a._v("配置文件检测")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./nginx -t -c /home/software/nginx/conf/nginx.conf\n")])])]),s("p",[a._v("显示 is ok没有任何问题，现在启动nginx")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./nginx\n")])])]),s("p",[a._v("依照上面的方式，我们上传一张图片。并进行访问")]),a._v(" "),s("h2",{attrs:{id:"fastdfs多节点安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fastdfs多节点安装"}},[a._v("#")]),a._v(" FastDFS多节点安装")]),a._v(" "),s("h3",{attrs:{id:"第一步-规定storage与tracker服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-规定storage与tracker服务器"}},[a._v("#")]),a._v(" 第一步 规定storage与tracker服务器")]),a._v(" "),s("p",[a._v("这里我用的是虚拟机，我这里在四台虚拟机上面都安装了单节点的fastdfs。我的四台虚拟机的ip如下。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("192.168.223.15\n192.168.223.16\n192.168.223.17\n192.168.223.18\n\n192.168.223.15 所属组：group1 角色：storage，tracker1\n192.168.223.16 所属组：group1 角色：storage\n192.168.223.17 所属组：group2 角色：storage，tracker2\n192.168.223.18 所属组：group2 角色：storage\n")])])]),s("h3",{attrs:{id:"第二步-修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-修改配置文件"}},[a._v("#")]),a._v(" 第二步 修改配置文件")]),a._v(" "),s("p",[a._v("由于FastDFS单节点使用的组都是group1.所以192.168.223.15这台机器上的配置不需要做任意修改。所以我们需要修改的地方其实是其他三台服务器。下面我会逐个说明如何改。")]),a._v(" "),s("p",[a._v("首先我们需要改的是192.168.223.16。由上面的分配我们可以知道。他们都是group1，所以我们只需要把tracker的ip指向192.168.223.15 详细的修改如下。首先我们需要进入到192.168.223.16的/etc/fdfs的目录下面。这一步我们做了很多遍。这里就不演示了。接下来进行文件的修改")]),a._v(" "),s("p",[a._v("修改client.conf 第14行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.15:22122\n")])])]),s("p",[a._v("修改 storage.conf 第119行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.15:22122\n")])])]),s("p",[a._v("修改 mod_fastdfs.conf 第40行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.15:22122\n")])])]),s("p",[a._v("接下修改的 192.168.223.17这个服务器。由上面的分配来看，它的归属组是group2。它的tracker是192.168.223.17。现在我们开始修改")]),a._v(" "),s("p",[a._v("修改client.conf 第14行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.17:22122\n")])])]),s("p",[a._v("修改 storage.conf 第11行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("group_name=group2\n")])])]),s("p",[a._v("修改第 119行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.17:22122\n")])])]),s("p",[a._v("修改 mod_fastdfs.conf 第40行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tracker_server=192.168.223.17:22122\n")])])]),s("p",[a._v("修改第 47行")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("group_name=group2\n")])])]),s("p",[a._v("ip为192.168.223.18 像 192.168.223.17一样修改。这样我们就完成了所有配置文件的修改")]),a._v(" "),s("h3",{attrs:{id:"第三步-关闭-重启服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-关闭-重启服务"}},[a._v("#")]),a._v(" 第三步 关闭，重启服务")]),a._v(" "),s("p",[a._v("首先我们关闭所有服务器的storage服务，tracker服务。首先查找进程然后关闭")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ps -ef | grep fdfs\n")])])]),s("p",[a._v("root后面的字段就是pid。由上面可以知道。我们的两个pid是53946,53967,现在我们把这两个进程kill掉")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("kill -9 53946\nkill -9 53967\n")])])]),s("p",[a._v("其他三台服务器也是这样做。")]),a._v(" "),s("p",[a._v("现在按照单节的方式启动。记住不是所有的服务器都要启动。storage与tracker。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("192.168.223.15 启动storage与tracker\n192.168.223.16 启动storage\n192.168.223.17 启动storage与tracker\n192.168.223.18 启动storage\n")])])]),s("p",[a._v("重启nginx服务，启动方式，先进入到nginx安装目录下的sbin目录，执行重启命令")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./nginx -s reload\n")])])]),s("h3",{attrs:{id:"第四步-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-测试"}},[a._v("#")]),a._v(" 第四步 测试")]),a._v(" "),s("p",[a._v("我们在192.168.223.16 上传一张图片，然后用192.168.223.15的ip访问。因为同一个组的storage会进行文件同步")]),a._v(" "),s("p",[a._v("这里可以看到上传后得到的url是192.168.223.15服务器上面的。我们用ip 192.168.223.16 与 192.168.223.15 都访问一遍")])])}),[],!1,null,null,null);s.default=r.exports}}]);