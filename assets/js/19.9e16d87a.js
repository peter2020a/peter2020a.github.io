(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{285:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker安装mysql8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装mysql8"}},[s._v("#")]),s._v(" Docker安装Mysql8")]),s._v(" "),a("h2",{attrs:{id:"一、前置需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、前置需求"}},[s._v("#")]),s._v(" 一、前置需求")]),s._v(" "),a("p",[s._v("1.linux系统")]),s._v(" "),a("p",[s._v("本人用的Centos7")]),s._v(" "),a("p",[s._v("2.安装docker")]),s._v(" "),a("h2",{attrs:{id:"二、部署方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、部署方法"}},[s._v("#")]),s._v(" 二、部署方法")]),s._v(" "),a("h3",{attrs:{id:"_1-拉取mysql8镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-拉取mysql8镜像"}},[s._v("#")]),s._v(" 1.拉取mysql8镜像")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull mysql:8\n")])])]),a("h3",{attrs:{id:"_2-创建配置文件挂载目录和数据挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建配置文件挂载目录和数据挂载目录"}},[s._v("#")]),s._v(" 2.创建配置文件挂载目录和数据挂载目录")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir -p /usr/mysql/conf /usr/mysql/data\n \nchmod -R 755 /usr/mysql/\n")])])]),a("p",[s._v("ps：")]),s._v(" "),a("p",[s._v("/home/mysql/config：放mysql配置文件my.conf")]),s._v(" "),a("p",[s._v("/home/mysql/data：放mysql数据")]),s._v(" "),a("h3",{attrs:{id:"_3-创建配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建配置文件"}},[s._v("#")]),s._v(" 3.创建配置文件")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /usr/mysql/conf/my.cnf\n")])])]),a("p",[s._v("内容如下")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[client]\n\n#socket = /usr/mysql/mysqld.sock\n\ndefault-character-set = utf8mb4\n\n[mysqld]\n\n#pid-file        = /var/run/mysqld/mysqld.pid\n\n#socket          = /var/run/mysqld/mysqld.sock\n\n#datadir         = /var/lib/mysql\n\n#socket = /usr/mysql/mysqld.sock\n\n#pid-file = /usr/mysql/mysqld.pid\n\ndatadir = /usr/mysql/data\n\ncharacter_set_server = utf8mb4\n\ncollation_server = utf8mb4_bin\n\nsecure-file-priv= NULL\n\n# Disabling symbolic-links is recommended to prevent assorted security risks\n\nsymbolic-links=0\n\n# Custom config should go here\n\n!includedir /etc/mysql/conf.d/\n")])])]),a("h3",{attrs:{id:"_4-启动容器并挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动容器并挂载目录"}},[s._v("#")]),s._v(" 4.启动容器并挂载目录")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -itd --name=mysql8 -v /usr/mysql/conf/my.cnf:/etc/mysql/my.cnf -v /usr/mysql/data:/usr/mysql/data -v /var/log/mysql:/var/log/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:8\n")])])]),a("p",[s._v("ps：")]),s._v(" "),a("p",[s._v("-v /usr/mysql/conf/my.cnf:/etc/mysql/my.cnf 本机的MySQL配置文件映射到容器的MySQL配置文件")]),s._v(" "),a("p",[s._v("-v /etc/localtime:/etc/localtime:ro 本机时间与数据库时间同步")]),s._v(" "),a("p",[s._v("–restart=always 当重启Docker时会自动启动该容器")]),s._v(" "),a("p",[s._v("-d : 后台运行")]),s._v(" "),a("p",[s._v("-p 端口映射 宿主机端口号:容器端口号")]),s._v(" "),a("p",[s._v("-e 环境参数，MYSQL_ROOT_PASSWORD设置root用户的密码")]),s._v(" "),a("p",[s._v("docker run -p 60306:3306 -e MYSQL_ROOT_PASSWORD=123 -v /etc/my.cnf:/etc/mysql/my.cnf:rw -v /etc/localtime:/etc/localtime:ro --name mysql8 --restart=always -dit mysql")]),s._v(" "),a("h3",{attrs:{id:"_5-进入mysql创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-进入mysql创建用户"}},[s._v("#")]),s._v(" 5.进入mysql创建用户")]),s._v(" "),a("h4",{attrs:{id:"_1-进入容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入容器"}},[s._v("#")]),s._v(" <1>进入容器")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it mysql8 /bin/bash\n")])])]),a("h4",{attrs:{id:"_2-进入mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-进入mysql"}},[s._v("#")]),s._v(" <2>进入mysql")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -uroot -p123456\n")])])]),a("h4",{attrs:{id:"_3-创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建用户"}},[s._v("#")]),s._v(" <3>创建用户")]),s._v(" "),a("p",[s._v("我这里创建一个叫 python 的用户")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 创建 python 用户，密码为123456，允许在任意机器上登录\nCREATE USER 'python'@'%' IDENTIFIED BY '123456';\n")])])]),a("h4",{attrs:{id:"_4-赋予权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-赋予权限"}},[s._v("#")]),s._v(" <4>赋予权限")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 赋予 python 用户在 所有机器上 对 所有数据库和数据表 拥有 所有操作权限\nGRANT ALL ON *.* TO 'python'@'%';\n")])])]),a("h2",{attrs:{id:"三、访问测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、访问测试"}},[s._v("#")]),s._v(" 三、访问测试")]),s._v(" "),a("p",[s._v("略")])])}),[],!1,null,null,null);a.default=r.exports}}]);